<!DOCTYPE html>
<html>
<head>
	<title>传视播客</title>
    <meta charset="utf-8">
    <script src="lib/angularjs/angular.min.js"></script>
    <script src="lib/angularjs/angular-route.min.js"></script>
    <script src="lib/angularjs/angular-ui-route.min.js"></script>
    <script src="lib/jquery/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="css/index2.css">
    <script src="script/route.js"></script>
</head>
<body>
	<div class="wrapper" ng-app="indexMainApp" ng-controller="indexController">
        <div class="header fixed">
            <div class="brand">
                <span>传视播客</span>
            </div>
            <div class="nav">
                <table id="nav-table">
                    <tr>
                        <td ng-repeat="nav in headerNavList" ui-sref="friends"
                            ng-class="{'header-nav-td-select': $state.includes('friends')}">
                            {{ nav.title }}
                        </td>
                    </tr>
                </table>
            </div>
            <div class="search">
                <input type="text" class="search_input" placeholder="根据用户名或者课程名查询...">
                <img src="image/icon-search.png" class="search_button">
            </div>
            <div class="info" style="background-color: #8a6d3b">11</div>
        </div>
        <div class="find-video-nav">
            <ul id="find_video_nav_ul">
                <li>推荐</li>
                <li>排行榜</li>
                <li>新品</li>
                <li>列表</li>
            </ul>
        </div>
        <div class="content1" ui-view>
            <h1>index.html</h1>
        </div>
        <div class="footer">

        </div>
	</div>
    <script>
        var app = angular.module('indexMainApp', ['ui.router']);
        app.config(function ($stateProvider, $urlRouterProvider) {
            $stateProvider
            .state('my', {
                url: '/my',
                templateUrl: 'my.html'
            })
            .state('friends', {
                url: '/friends',
                templateUrl: 'friends.html'
            })
        });
        app.controller('indexController', function ($scope, $location, $state) {
            console.log($state.includes('friends'));
            url = $location.url()
            var headerNavList = $scope.headerNavList = [
                {
                    'id': 'find',
                    'title': '发现',
                    'linkUrl': '/',
                    'active': false
                },
                {
                    'id': 'my',
                    'title': '我的',
                    'linkUrl': '/my',
                    'active': false
                },
                {
                    'id': 'friends',
                    'title': '朋友',
                    'linkUrl': '/friends',
                    'active': false
                },
                {
                    'id': 'market',
                    'title': '商场',
                    'linkUrl': '/market',
                    'active': false
                },
                {
                    'id': 'download',
                    'title': 'APP下载',
                    'linkUrl': '/download',
                    'active': false
                }
            ]
            angular.forEach(headerNavList, function (data) {
                if (url.substr(1).indexOf(data.linkUrl.substr(1)) != -1) {
                    data.active = true;
                    return false;
                }
            });
            $scope.clickFindVideo = function (id, path) {
                angular.forEach(headerNavList, function (data) {
                    if (data.id == id) {
                        data.active = true;
                    }else {
                        data.active = false;
                    }
                });
                $location.path(path)
            }
        });
        // app.config(routeConfig)
    </script>
<!-- <script src="script/js/index.js"></script> -->
</body>
</html>